"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1209],{61209:function(e,n,r){r.d(n,{Z:function(){return U}});var t=r(26042),i=r(29815),a=r(85893),l=r(67294),o=r(86893),s=r(46670),u=r(16170),c=r(91237),d=r(87423),p=r(7297),f=r(93391),v=r(37234),h=r(14846),g=r(41664),m=r.n(g),x=r(64487),E=r(28941),N=r(35381),T=r(70935),j=r(10320);function R(e){var n=e.dbFilter,r=e.onChange;if((0,l.useEffect)((function(){(0,j.gb)(n.val)||r("last-1-days")}),[n.val]),!(0,j.gb)(n.val))return null;var t=(0,j.xD)(n.val),i=t.first,o=t.numeric,s=t.last;return(0,a.jsxs)("div",{className:"flex-grow-1 pr-2 d-flex",children:[(0,a.jsxs)(E.lq,{name:"first",id:"".concat(n.name,"-first"),className:"flex-shrink-0 flex-grow-1",label:"",value:i,onChange:function(e){r("".concat(e.currentTarget.value,"-").concat(o,"-").concat(s))},required:!0,children:[(0,a.jsx)("option",{value:"last",children:"Last"}),(0,a.jsx)("option",{value:"next",children:"Next"})]}),(0,a.jsx)(E.oi,{label:"",type:"number",className:"flex-shrink-1 flex-grow-0 ml-1",id:"".concat(n.id,"-numeric"),value:o,onChange:function(e){var n=parseInt(e.currentTarget.value);!isNaN(n)&&n>0&&r("".concat(i,"-").concat(n,"-").concat(s))},step:"1",min:"1",required:!0}),(0,a.jsxs)(E.lq,{name:"last",id:"".concat(n.name,"-last"),className:"flex-shrink-0 flex-grow-1 ml-1",label:"",value:s,onChange:function(e){r("".concat(i,"-").concat(o,"-").concat(e.currentTarget.value))},required:!0,children:[(0,a.jsx)("option",{value:"hours",children:"Hour(s)"}),(0,a.jsx)("option",{value:"days",children:"Day(s)"}),(0,a.jsx)("option",{value:"months",children:"Month(s)"}),(0,a.jsx)("option",{value:"years",children:"Year(s)"})]})]})}function _(e){var n=e.dbFilter,r=e.onChange,t=(0,l.useRef)(null),i=(0,l.useState)(""),o=i[0],s=i[1],u=(0,l.useState)(!1),c=u[0],d=u[1];return(0,l.useEffect)((function(){n.val&&s(n.val)}),[]),(0,l.useEffect)((function(){var e="";c&&t.current&&(e="Pattern Error"),t.current.setCustomValidity(e)}),[c]),(0,a.jsx)("div",{className:"flex-grow-1 pr-2",children:(0,a.jsx)(E.oi,{label:"Enter a value",id:"".concat(n.id,"-filter-value"),value:o,required:!0,ref:t,onChange:function(e){var n=e.currentTarget.value;s(n);var t=(0,j.EX)(n);d(!t),t&&r(n)},invalid:c,invalidFeedback:c&&"Pattern Error"})})}function A(e){var n=e.dbFilter,r=e.onChange;return(0,a.jsx)("div",{className:"flex-grow-1 pr-2",children:(0,a.jsx)(E.sJ,{label:"Enter comma separated values",id:"".concat(n.id,"-filter-value"),value:"string"===typeof n.val?n.val:"",required:!0,onChange:r,short:!0})})}var b=r(70109),C=r(88606);function S(e){var n=e.dbFilter,r=e.onChange;return(0,a.jsx)("div",{className:"flex-grow-1 pr-2 d-flex",children:(0,a.jsxs)(E.lq,{name:"error",id:"".concat(n.name,"-error"),className:"flex-shrink-0 flex-grow-1",label:"Error",value:n.val,onChange:r,required:!1,children:[(0,a.jsx)("option",{value:"",children:"All Errors"}),(0,a.jsx)("option",{value:b.u.EMPTY_DATA,children:(0,C.lj)(b.u.EMPTY_DATA)}),(0,a.jsx)("option",{value:b.u.INVALID_DATA,children:(0,C.lj)(b.u.INVALID_DATA)}),(0,a.jsx)("option",{value:b.u.NO_RESULT,children:(0,C.lj)(b.u.NO_RESULT)}),(0,a.jsx)("option",{value:b.u.CREDITS_ERROR,children:(0,C.lj)(b.u.CREDITS_ERROR)}),(0,a.jsx)("option",{value:b.u.CREDENTIALS_ERROR,children:(0,C.lj)(b.u.CREDENTIALS_ERROR)})]})})}function I(e){var n=e.property,r=e.dbFilter,t=e.onValChange,i=function(e){t(e.currentTarget.value)};if(-1!==[v.pg.IS_EMPTY,v.pg.IS_NOT_EMPTY,v.pg.SUCCESSFUL].indexOf(r.op))return(0,a.jsx)("div",{className:"flex-grow-1 pr-2",children:(0,a.jsx)("span",{children:"\xa0"})});if(n){if(n.primitiveDataType===T.k.Boolean){var l=!1;return l="string"!==typeof r.val&&r.val,(0,a.jsx)("div",{className:"flex-grow-1 pr-2",children:(0,a.jsx)(E.I0,{label:"",id:"".concat(r.id,"-filter-value"),checked:l,onChange:function(e){t(e.currentTarget.checked)}})})}if(n.primitiveDataType===T.k.Number)return(0,a.jsx)("div",{className:"flex-grow-1 pr-2",children:(0,a.jsx)(E.oi,{label:"Enter a value",type:"number",id:"".concat(r.id,"-filter-value"),value:r.val,onChange:i,required:!0})});if(n.primitiveDataType===T.k.RunStatus&&r.op===v.pg.WITH_ERROR)return(0,a.jsx)(S,{dbFilter:r,onChange:i});if(-1!==[T.k.DateTime,T.k.RunStatus].indexOf(n.primitiveDataType))return r.op==v.pg.LESS_THAN_RELATIVE||r.op==v.pg.LESS_THAN_OR_EQUAL_RELATIVE||r.op==v.pg.GREATER_THAN_RELATIVE?(0,a.jsx)(R,{dbFilter:r,onChange:function(e){t(e)}}):(0,a.jsx)("div",{className:"flex-grow-1 pr-2 flex-shrink-0",children:(0,a.jsx)(E.Yg,{label:"Enter a datetime",id:"".concat(r.id,"-filter-value"),name:"".concat(r.id,"-filter-value"),value:r.val,onChange:function(e){t(e)},required:!0})})}return r.op===v.pg.REGEXP?(0,a.jsx)(_,{dbFilter:r,onChange:function(e){t(e)}}):-1!==[v.pg.IN,v.pg.NOT_IN,v.pg.CONTAINS_ANY,v.pg.NOT_CONTAINS_ANY].indexOf(r.op)?(0,a.jsx)(A,{dbFilter:r,onChange:i}):(0,a.jsx)("div",{className:"flex-grow-1 pr-2",children:(0,a.jsx)(E.oi,{label:"Enter a value",id:"".concat(r.id,"-filter-value"),value:"string"===typeof r.val?r.val:"",required:!0,onChange:i})})}function O(e){var n=e.dbFilter,r=e.property,t=e.operators,i=e.onOpChange,l=h.i6;return r&&(r.primitiveDataType===T.k.Boolean?l=h.EN:r.primitiveDataType===T.k.Number?l=h.eW:r.primitiveDataType===T.k.DateTime?l=h.FG:r.primitiveDataType===T.k.RunStatus&&(l=h.BX)),t&&t.length>1&&(l=l.filter((function(e){return-1!==t.indexOf(e.value)}))),(0,a.jsx)("div",{className:"flex-grow-1 pr-2",children:(0,a.jsxs)(E.lq,{name:"operator",id:"".concat(n.name,"-").concat(n.op),label:"Select an operator",value:n.op,onChange:i,required:!0,children:[(0,a.jsx)("option",{value:"",children:"--"}),l.map((function(e){return(0,a.jsx)("option",{value:e.value,children:e.name},"".concat(n.id,"-op-key").concat(e.value))}))]})})}function y(e){var n=e.dbFilterGroup,r=e.lineIndex,t=e.onGroupOperationChange;return(0,a.jsxs)("div",{style:{width:80},className:"flex-shrink-0 pr-2 text-center",children:[0===r&&(0,a.jsx)("span",{children:"Where"}),1==r&&(0,a.jsxs)(E.lq,{name:"group-operation",id:"".concat(n.id,"-filter-name"),label:"Operation",value:n.operation,onChange:function(e){t(n.id,e.currentTarget.value)},children:[(0,a.jsx)("option",{value:v.nE.AND,children:"and"}),(0,a.jsx)("option",{value:v.nE.OR,children:"or"})]}),r>1&&(0,a.jsx)("span",{children:n.operation})]})}var D=[v.pg.REGEXP,v.pg.IN,v.pg.NOT_IN,v.pg.CONTAINS_ANY,v.pg.NOT_CONTAINS_ANY];function k(e){var n=e.properties,r=e.dbFilter,t=e.dbFilterGroup,i=e.lineIndex,s=e.restrictedUser,c=e.authenticatedUser,d=e.options,p=e.onGroupOperationChange,f=e.onChange,v=e.onDelete,g=e.onClose,T=function(){_(!1)},j=(0,l.useState)(!1),R=j[0],_=j[1],A=r.name&&r.name.split(".")[0],b=n.find((function(e){return e.identifier===A})),C=!0;return d&&d.filterOperations&&d.filterOperations.length<=1&&(C=!1),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-2 mb-2",children:[C&&(0,a.jsx)(y,{lineIndex:i,dbFilterGroup:t,onGroupOperationChange:p}),(0,a.jsx)("div",{className:"flex-grow-1 pr-2",style:{minWidth:170,maxWidth:250},children:(0,a.jsxs)(E.lq,{name:"property",id:"".concat(r.id,"-filter-name"),label:"Select a property",value:A,onChange:function(e){var t=e.currentTarget.value;if(t&&0!=t.length){var i=r.val,a=r.op,l=n.find((function(e){return e.identifier==t}));if(A&&A.length>0){var o=n.find((function(e){return e.identifier==A}));if(!o||!l)return x.Tb(new Error("Missing property in filters")),void window.alert("Error. Please contact support@datablist.com");(0,N.o_)(o.primitiveDataType,l.primitiveDataType)||(i="",a=(0,h.$g)(l.primitiveDataType))}(a&&!(0,h.xF)(l.primitiveDataType,a)||!a)&&(a=(0,h.$g)(l.primitiveDataType)),f({id:r.id,name:t,op:a,val:i})}else f({id:r.id,name:"",op:r.op,val:""})},required:!0,children:[(0,a.jsx)("option",{value:"",children:"--"}),n.map((function(e){return(0,a.jsx)("option",{value:e.identifier,children:e.name},e.identifier)}))]})}),(0,a.jsx)(O,{property:b,dbFilter:r,onOpChange:function(e){var n=e.currentTarget.value;-1===D.indexOf(n)||c&&!s?(_(!1),f({id:r.id,name:A,op:n,val:r.val})):(_(!0),u.B({category:"Convert",action:"Restricted",label:"RegExFilter"}))},operators:d&&d.operators?d.operators:null}),(0,a.jsx)(I,{property:b,dbFilter:r,onValChange:function(e){f({id:r.id,name:A,op:r.op,val:e})}}),(0,a.jsx)("div",{style:{height:48},children:(0,a.jsx)("button",{className:"btn btn-light height-full",type:"button",onClick:function(){v(r.id)},children:(0,a.jsx)(o.We9,{size:16})})})]}),R&&(0,a.jsx)(a.Fragment,{children:c?(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("span",{style:{color:"red"},children:'Filtering with "Regular Expression", "In", "Not in", "Contains Any" and "Not Contains Any" is not available on the free plan.'}),"\xa0",(0,a.jsx)(m(),{href:"/account/upgrade",children:(0,a.jsx)("a",{onClick:function(){g()},children:"Upgrade \ud83d\ude80"})}),"\xa0-\xa0",(0,a.jsx)("span",{className:"fake-link black",onClick:T,children:"Close"}),"."]}):(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("span",{style:{color:"red"},children:'Login Required for filtering with "Regular Expression" or with "In"/"Not in" operators.'}),"\xa0",(0,a.jsx)("a",{href:"https://app.datablist.com/auth/signup",target:"_blank",children:"Sign up"}),"\xa0-\xa0",(0,a.jsx)("span",{className:"fake-link black",onClick:T,children:"Close"}),"."]})})]})}function w(){var e=(0,p.Z)(["\n    border: 1px solid #858A99;\n    padding: 16px;\n"]);return w=function(){return e},e}var F=(0,f.ZP)("div")(w());function L(e){var n=e.subFilterGroup,r=e.properties,i=e.lineIndex,l=e.mainDbFilterGroup,s=e.restrictedUser,u=e.authenticatedUser,c=e.options,d=e.onGroupOperationChange,p=e.onChange,f=e.onDelete,v=e.onClose,g=function(){f(n.id)},m=!0;return c&&c.filterOperations&&c.filterOperations.length<=1&&(m=!1),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-2 mb-2",children:[m&&(0,a.jsx)(y,{lineIndex:i,dbFilterGroup:l,onGroupOperationChange:d}),(0,a.jsxs)(F,{className:"rounded",children:[(0,a.jsx)("div",{children:(0,a.jsx)(G,{properties:r,dbFilterGroup:n,onChange:function(e){0===e.filters.length?f(n.id):p(e)},onDelete:g,onClose:v,restrictedUser:s,authenticatedUser:u})}),(0,a.jsxs)("div",{className:"d-flex justify-content-end mt-3",children:[(0,a.jsx)("div",{className:"text-right mr-2",children:(0,a.jsxs)("button",{className:"btn btn-light",type:"button",onClick:function(){var e=(0,t.Z)({},n);e.filters.push((0,h._v)()),p(e)},children:[(0,a.jsx)("span",{children:"Add filter in group"}),(0,a.jsx)(o.OvN,{size:16})]})}),(0,a.jsx)("div",{className:"text-right mr-2",children:(0,a.jsxs)("button",{className:"btn btn-light",type:"button",onClick:g,children:[(0,a.jsx)("span",{children:"Remove group"}),(0,a.jsx)(o.We9,{size:16})]})})]})]})]})})}function G(e){var n=e.properties,r=e.dbFilterGroup,i=e.restrictedUser,l=e.authenticatedUser,o=e.options,s=e.onChange,u=(e.onDelete,e.onClose),c=function(e){var n=(0,t.Z)({},r),i=n.filters.findIndex((function(n){return n.id===e.id}));n.filters[i]=e,s(n)},d=function(e){var n=(0,t.Z)({},r);n.filters=n.filters.filter((function(n){return n.id!==e})),s(n)},p=function(e,n){var i=(0,t.Z)({},r);i.operation=n,s(i)};return(0,a.jsx)("div",{className:"filter-group-outter",children:(0,a.jsx)("div",{className:"filter-group-inner",children:r.filters.map((function(e,t){return(0,a.jsx)("div",{children:(0,v.O6)(e)?(0,a.jsx)(L,{lineIndex:t,properties:n,mainDbFilterGroup:r,subFilterGroup:e,restrictedUser:i,authenticatedUser:l,options:o,onGroupOperationChange:p,onChange:c,onDelete:d,onClose:u},e.id):(0,a.jsx)(k,{dbFilter:e,dbFilterGroup:r,lineIndex:t,properties:n,restrictedUser:i,authenticatedUser:l,options:o,onGroupOperationChange:p,onChange:c,onDelete:d,onClose:u},e.id)},e.id)}))})})}var U=(0,s.Pi)((function(e){var n=e.collection,r=e.extraProperties,l=e.filterGroupLocal,s=e.handleFilterGroupChange,p=e.options,f=e.onClose,v=(0,c.QT)().authStore,g=v.isAuthenticatedUser,m=g&&v.isReady&&v.currentAccount.freePlan,x="";g?m&&(x="Filter Groups are not available on the free plan. Please Upgrade."):x="Login Required. Signup for free.";var E=(0,i.Z)(n.properties);return r&&r.forEach((function(e){E.find((function(n){return n.identifier===e.identifier}))||E.push(e)})),(0,a.jsxs)("div",{className:"filters-container",children:[l&&(0,a.jsx)(G,{properties:E,dbFilterGroup:l,restrictedUser:m,authenticatedUser:g,options:p,onChange:s,onDelete:function(e){throw new Error("Cannot delete master filter group")},onClose:function(){f&&f()}},l.id),(!l||0===l.filters.length)&&(0,a.jsx)("div",{className:"text-center mt-4 mb-4 text-gray",children:"No filter"}),(0,a.jsxs)("div",{className:"d-flex justify-content-end mt-3 filters-cta",children:[(0,a.jsx)("div",{className:"text-right mr-2",children:(0,a.jsxs)("button",{className:"btn btn-light",type:"button",onClick:function(){s((function(e){if(null==e)return(0,h.r1)();var n=(0,t.Z)({},e);return n.filters.push((0,h._v)()),n}))},children:[(0,a.jsx)("span",{children:"Add filter"}),(0,a.jsx)(o.OvN,{size:16})]})}),(!p||!p.disableFilterGroup)&&(0,a.jsx)(d.u,{content:x,children:(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("button",{className:"btn btn-light",type:"button",onClick:function(){var e=!1;s((function(n){var r=(0,t.Z)({},n);if(1===r.filters.length){var i=r.filters[0];"string"===typeof i.name&&0===i.name.length&&(r.filters=[],e=!0)}return r.filters.push((0,h.r1)()),r})),u.B({category:"Data",action:"DataTable",label:"AddFiltersGroup",data:{collectionId:n.id,removeInitialFilter:e}})},disabled:""!==x,children:[(0,a.jsx)("span",{children:"Add filter group"}),(0,a.jsx)(o.OvN,{size:16})]})})})]})]})}))},14846:function(e,n,r){r.d(n,{$g:function(){return f},BX:function(){return d},EN:function(){return s},FG:function(){return u},Fz:function(){return g},_v:function(){return v},eW:function(){return c},i6:function(){return o},r1:function(){return h},xF:function(){return p}});var t=r(26042),i=r(34705),a=r(37234),l=r(70935),o=[{value:a.pg.EQ,name:"is"},{value:a.pg.NOT_EQ,name:"is not"},{value:a.pg.CONTAINS,name:"contains"},{value:a.pg.NOT_CONTAINS,name:"does not contain"},{value:a.pg.CONTAINS_ANY,name:"contains any"},{value:a.pg.NOT_CONTAINS_ANY,name:"does not contain any"},{value:a.pg.STARTSWITH,name:"startswith"},{value:a.pg.ENDSWITH,name:"endswith"},{value:a.pg.IN,name:"in"},{value:a.pg.NOT_IN,name:"not in"},{value:a.pg.IS_EMPTY,name:"is empty"},{value:a.pg.IS_NOT_EMPTY,name:"is not empty"},{value:a.pg.REGEXP,name:"regexp"}],s=[{value:a.pg.EQ,name:"is"}],u=[{value:a.pg.LESS_THAN,name:"is before"},{value:a.pg.LESS_THAN_RELATIVE,name:"is before - relative"},{value:a.pg.GREATER_THAN,name:"is after"},{value:a.pg.GREATER_THAN_RELATIVE,name:"is after - relative"},{value:a.pg.IS_EMPTY,name:"is empty"},{value:a.pg.IS_NOT_EMPTY,name:"is not empty"}],c=[{value:a.pg.EQ,name:"="},{value:a.pg.NOT_EQ,name:"\u2260"},{value:a.pg.LESS_THAN,name:"<"},{value:a.pg.GREATER_THAN,name:">"},{value:a.pg.LESS_THAN_OR_EQUAL,name:"\u2264"},{value:a.pg.GREATER_THAN_OR_EQUAL,name:"\u2265"},{value:a.pg.IS_EMPTY,name:"is empty"},{value:a.pg.IS_NOT_EMPTY,name:"is not empty"}],d=[{value:a.pg.WITH_ERROR,name:"with error"},{value:a.pg.SUCCESSFUL,name:"successful"},{value:a.pg.IS_NOT_EMPTY,name:"has run"},{value:a.pg.IS_EMPTY,name:"has not run"},{value:a.pg.LESS_THAN,name:"last run before"},{value:a.pg.LESS_THAN_RELATIVE,name:"last run before - relative"},{value:a.pg.GREATER_THAN,name:"last run after"},{value:a.pg.GREATER_THAN_RELATIVE,name:"last run after - relative"}];function p(e,n){switch(e){case l.k.Text:return o.find((function(e){return e.value===n}));case l.k.Boolean:return s.find((function(e){return e.value===n}));case l.k.DateTime:return u.find((function(e){return e.value===n}));case l.k.Number:return c.find((function(e){return e.value===n}));case l.k.RunStatus:return d.find((function(e){return e.value===n}));default:return!0}}function f(e){switch(e){case l.k.RunStatus:return a.pg.IS_NOT_EMPTY;case l.k.DateTime:return a.pg.LESS_THAN_RELATIVE;default:return a.pg.EQ}}function v(e,n){return{id:(0,i.Xz)(),name:e||"",op:n||a.pg.EQ,val:""}}function h(e,n){return{id:(0,i.Xz)(),operation:a.nE.AND,filters:[v(e,n)]}}function g(e,n){var r=(0,t.Z)({},e),i=[];return r.filters.forEach((function(e){if((0,a.O6)(e))i.push(g(e,n));else if(e.id&&e.name&&e.op){var r=(0,t.Z)({},e),o=n.find((function(n){return n.identifier===e.name}));o&&o.primitiveDataType===l.k.RunStatus&&-1!==[a.pg.GREATER_THAN,a.pg.GREATER_THAN_OR_EQUAL,a.pg.GREATER_THAN_RELATIVE,a.pg.LESS_THAN,a.pg.LESS_THAN_OR_EQUAL,a.pg.LESS_THAN_RELATIVE].indexOf(e.op)&&-1===".".indexOf(r.name)&&(r.name="".concat(r.name,".t")),i.push(r)}})),r.filters=i,r}},88606:function(e,n,r){r.d(n,{$F:function(){return c},Cf:function(){return s},Nk:function(){return o},lj:function(){return u}});var t=r(85893),i=r(89583),a=r(70231),l=r(70109);function o(e){var n=null;return e===l.w.SUCCESS?n=(0,t.jsx)(i.FJM,{size:16,color:"green"}):e===l.w.WARNING?n=(0,t.jsx)(i.gJy,{size:16,color:"#ff8b3d"}):e===l.w.ERROR&&(n=(0,t.jsx)(a.hKd,{size:16,color:"#D57067"})),n}function s(e){var n=null;return e===l.w.SUCCESS?n="Success":e===l.w.WARNING?n="Warning":e===l.w.ERROR&&(n="Error"),n}function u(e){var n=null;return e===l.u.INVALID_DATA?n="Invalid Data":e===l.u.EMPTY_DATA?n="Empty Data":e===l.u.NO_RESULT?n="No Result":e===l.u.CREDITS_ERROR?n="Insufficient Credits":e===l.u.CREDENTIALS_ERROR&&(n="Credentials Error"),n}function c(e){var n=null;switch(e.s){case"s":n=l.w.SUCCESS;break;case"w":n=l.w.WARNING;break;case"e":n=l.w.ERROR}var r=null;switch(e.k){case"n":r=l.u.NO_RESULT;break;case"e":r=l.u.EMPTY_DATA;break;case"i":r=l.u.INVALID_DATA;break;case"c":r=l.u.CREDITS_ERROR;break;case"k":r=l.u.CREDENTIALS_ERROR}var t="number"===typeof e.t?new Date(1e3*e.t):null;return{status:n,credits:Math.ceil(100*parseFloat(e.c))/100,id:e.i,message:e.m,errorKind:r,preview:e.p,timestamp:t}}}}]);
//# sourceMappingURL=https://app.datablist.com/static/chunks/1209-78b515716ce532a8.js.map