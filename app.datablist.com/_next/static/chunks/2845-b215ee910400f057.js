"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2845],{70475:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(7297),i=t(85893);t(67294);function o(){var e=(0,r.Z)(["\n    padding: 16px;\n    border-radius: 8px;\n    background-color: #FEF7E2;\n    color: #BD433E;\n"]);return o=function(){return e},e}var a=t(93391).ZP.div(o());function s(e){var n=e.children;return(0,i.jsx)(a,{className:"text-center mt-6",children:n})}},9511:function(e,n,t){t.d(n,{F:function(){return b}});var r=t(47568),i=t(20414),o=t(85893),a=t(67294),s=t(46670),c=t(86893),u=t(16170),l=t(28941),d=t(91237),p=t(87789),f=t(70935),h=t(34705),y=t(88854),m=t(72130),v=(t(64940),{Boolean:100});function x(e){var n=e.addProperty,t=e.onPrevious,r=e.collection,i=e.nameSuggestion,s=e.rangeSuggestion,u=e.hideTitle,x=(0,d.QT)().uiStore,g=(0,a.useState)(i||""),b=g[0],j=g[1],P=(0,a.useState)(""),k=P[0],C=P[1],w=(0,a.useState)(!1),N=w[0],S=w[1],T=(0,a.useState)(!1),_=T[0],E=(T[1],(0,a.useState)(s||f.k.Text)),A=E[0],Z=E[1],I=(0,a.useState)(!1),q=I[0],z=I[1],B=(0,a.useState)(!0),D=B[0],F=B[1],K=(0,a.useState)(!1),L=K[0],U=K[1],Q=(0,a.useRef)(null);(0,a.useEffect)((function(){Z(s||f.k.Text)}),[s]),(0,a.useEffect)((function(){i?(j(i),Y(i)):(j(""),C(""))}),[i]),(0,a.useEffect)((function(){var e;null===Q||void 0===Q||null===(e=Q.current)||void 0===e||e.focus()}),[]);var Y=function(e){if(D){var n=r.generatePropertyKey(e);C(n)}},M=function(){x.modal.close()},R="undefined"!==typeof u&&u;return(0,o.jsxs)("div",{children:[!R&&(0,o.jsx)("h4",{children:"Custom Property"}),(0,o.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),r.sortedProperties.find((function(e){return e.identifier===k})))window.alert("A property already exists with the same key");else if(0!==k.length){U(!0);var t=v[A]||null,i=new p.Z9({name:b,key:k,range:A,columnWidth:t,unique:N,withIndex:_},r.workspace,r.id);n(i,(function(){U(!1)}))}else window.alert("Your property name must contains alphanumeric characters")},children:[(0,o.jsx)(l.oi,{autoComplete:"off",id:"new_property",name:"new_property",value:b,label:"Property Name",ref:Q,onChange:function(e){j(e.currentTarget.value),Y(e.currentTarget.value)},onKeyDown:function(e){"Escape"!=e.key||""!=b&&b!=i||(e.preventDefault(),t?t():M())},required:!0}),(0,o.jsx)(l.lq,{value:A,onChange:function(e){Z(e.currentTarget.value)},label:"Property Type",id:"property_type",children:y.C.filter((function(e){return e.editable})).map((function(e){return(0,o.jsx)("option",{value:e.id,children:e.name},e.id)}))}),(0,o.jsxs)("div",{className:"mt-2 mb-5",children:[(0,o.jsxs)("h5",{className:"mb-2 d-flex align-items-center cursor-pointer no-select",onClick:function(){z(!q)},children:[(0,o.jsx)("span",{className:"d-inline-flex",children:"More options"}),(0,o.jsx)("span",{className:"d-inline-flex ml-1",children:q?(0,o.jsx)(c.bTu,{size:14}):(0,o.jsx)(c.Tfp,{size:14})})]}),q&&(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"mt-3",children:(0,o.jsx)(m.Z,{checked:N,onChange:function(e){S(e.currentTarget.checked)}})}),!1,D?(0,o.jsxs)("div",{className:"mt-4",children:["Property key (used for API calls):\xa0",(0,o.jsx)("strong",{children:k}),"\xa0",(0,o.jsx)("span",{onClick:function(){F(!D)},style:{cursor:"pointer",paddingLeft:4},children:(0,o.jsx)(c.IYd,{size:10})})]}):(0,o.jsxs)("div",{className:"form-group floating",children:[(0,o.jsx)("input",{autoComplete:"off",className:"form-control",id:"property_key",name:"property_key",value:k,onChange:function(e){C((0,h.r2)(e.currentTarget.value))},placeholder:"Property Key"}),(0,o.jsx)("label",{htmlFor:"property_key",children:"Property Key"})]})]})]}),(0,o.jsxs)("div",{className:"form-actions d-flex justify-content-between mt-5",children:[t?(0,o.jsx)("div",{className:"btn btn-secondary",onClick:function(){t()},children:"Previous"}):(0,o.jsx)("div",{className:"btn btn-secondary",onClick:M,children:"Close"}),L?"Loading":(0,o.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Create Property"})]})]})]})}function g(e){var n=e.collection,t=e.builtInProperty,r=e.addProperty,i=(0,a.useState)(!1),s=i[0],c=i[1];return(0,o.jsxs)("button",{className:"btn btn-light",onClick:function(){c(!0);var e=t.property,i=new p.Z9({id:e["@id"],name:e.label},n.workspace,n.id);r(i,(function(){c(!1)}))},type:"button",disabled:s,children:[(0,o.jsx)("span",{children:s?"Adding ".concat(t.label,"..."):t.label}),t.icon]},t.property["@id"])}var b=(0,s.Pi)((function(e){var n=e.collection,t=e.onNewProperty,s=e.onError,l=e.onPrevious,p=e.nameSuggestion,f=e.rangeSuggestion,h=e.hideBuiltInProperties,y=(0,a.useState)(null),m=y[0],v=y[1],b=(0,d.QT)().vocabStore;function j(e,n){return P.apply(this,arguments)}function P(){return(P=(0,r.Z)((function(e,r){var o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,n.createProperty(e,!0,!0)];case 1:return i.sent(),[3,3];case 2:throw o=i.sent(),s&&s("Error while creating property. Please try again or refresh page."),r&&r(),o;case 3:return t&&t(e),u.B({category:"Data",action:"Property",label:"CreateProperty",data:{collectionId:n.id,dataType:e.dataType,propertyName:e.displayName,isUnique:e.isUnique}}),[2]}}))}))).apply(this,arguments)}function k(e,n){return C.apply(this,arguments)}function C(){return(C=(0,r.Z)((function(e,n){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return v(e.identifier),[4,j(e,(function(){n&&n(),v(null)}))];case 1:return t.sent(),[2]}}))}))).apply(this,arguments)}(0,a.useEffect)((function(){!function(){var e=(0,r.Z)((function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return[4,b.fetchVocab()];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}()()}),[]);var w=[];if(b.vocabLoaded){var N=b.properties;if(!n.sortedProperties.find((function(e){return"createdAt"===e.id}))){var S=N.find((function(e){return"createdAt"===e["@id"]}));S&&w.push({property:S,label:"Created At",icon:(0,o.jsx)(c.TCC,{size:16})})}if(!n.sortedProperties.find((function(e){return"updatedAt"===e.id}))){var T=N.find((function(e){return"updatedAt"===e["@id"]}));T&&w.push({property:T,label:"Updated At",icon:(0,o.jsx)(c.TCC,{size:16})})}}var _="undefined"!==typeof h&&h,E=w.filter((function(e){return!m||e.property["@id"]===m}));return(0,o.jsxs)("div",{children:[E.length>0&&!_&&(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{children:"Builtin properties"}),(0,o.jsx)("div",{className:"d-flex",children:E.map((function(e){return(0,o.jsx)(g,{builtInProperty:e,collection:n,addProperty:k},e.property["@id"])}))})]}),!m&&(0,o.jsx)(x,{addProperty:j,collection:n,nameSuggestion:p,rangeSuggestion:f,hideTitle:_,onPrevious:l})]})}))}}]);
//# sourceMappingURL=https://app.datablist.com/static/chunks/2845-b215ee910400f057.js.map